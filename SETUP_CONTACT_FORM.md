# お問い合わせフォームのメール送信設定ガイド

このガイドでは、お問い合わせフォームからメールを送信するための設定方法を説明します。

## 必要なもの

- Resendアカウント（無料プランで3,000通/月まで送信可能）
- メールを受信するメールアドレス

## セットアップ手順

### 1. Resendアカウントの作成

1. [Resend](https://resend.com/)にアクセスして、アカウントを作成します
2. メールアドレスで登録し、確認メールを受け取ります

### 2. API Keyの取得

1. Resendのダッシュボードにログインします
2. 左側のメニューから「API Keys」をクリックします
3. 「Create API Key」ボタンをクリックします
4. 名前を入力（例: Portfolio Contact Form）し、「Add」をクリックします
5. 表示されたAPI Keyをコピーします（**一度しか表示されないので注意！**）

### 3. 環境変数の設定

1. プロジェクトのルートディレクトリに `.env.local` ファイルを作成します
2. 以下の内容を記述します：

```bash
# Resend API Key
RESEND_API_KEY=re_xxxxxxxxxxxxxxxxxxxxxxxxxx

# Contact Email（お問い合わせを受信するメールアドレス）
CONTACT_EMAIL=your-email@example.com
```

3. `RESEND_API_KEY` に、先ほどコピーしたAPI Keyを貼り付けます
4. `CONTACT_EMAIL` に、お問い合わせを受信したいメールアドレスを入力します

### 4. ドメイン認証（本番環境用・オプション）

開発環境では、Resendのデフォルトドメイン (`onboarding@resend.dev`) から送信されます。
本番環境で独自ドメインから送信したい場合は、以下の手順を実行します：

1. Resendのダッシュボードで「Domains」をクリックします
2. 「Add Domain」をクリックし、ドメインを追加します
3. DNS設定に必要なレコードを追加します（SPF、DKIM、DMARCなど）
4. 認証が完了したら、`pages/api/contact.ts` の `from` フィールドを更新します：

```typescript
from: 'Portfolio Contact <contact@yourdomain.com>',
```

### 5. 開発サーバーの起動

```bash
npm run dev
```

### 6. 動作確認

1. ブラウザで `http://localhost:3000/contact` にアクセスします
2. お問い合わせフォームに必要事項を入力し、送信します
3. 設定したメールアドレスにメールが届くことを確認します

## トラブルシューティング

### メールが送信されない

- `.env.local` ファイルが正しく作成されているか確認してください
- API Keyが正しく設定されているか確認してください
- 開発サーバーを再起動してみてください（環境変数の変更後は再起動が必要です）

### メールが届かない

- `CONTACT_EMAIL` が正しく設定されているか確認してください
- スパムフォルダを確認してください
- Resendのダッシュボードで送信ログを確認してください

### エラーが表示される

- ブラウザの開発者ツール（F12）でコンソールエラーを確認してください
- サーバーのログを確認してください（ターミナル）

## セキュリティに関する注意事項

- `.env.local` ファイルは `.gitignore` に含まれており、Gitリポジトリにコミットされません
- API Keyは絶対に公開しないでください
- 本番環境では、環境変数をホスティングサービス（Vercel、Netlifyなど）の設定画面で設定してください

## 料金について

Resendの無料プランでは、月に3,000通まで送信できます。
それ以上送信する場合は、有料プランへのアップグレードが必要です。

詳細は[Resendの料金ページ](https://resend.com/pricing)を確認してください。
